{"version":3,"sources":["webpack:///./src/components/goods/Params.vue?3966","webpack:///src/components/goods/Params.vue","webpack:///./src/components/goods/Params.vue?5c45","webpack:///./src/components/goods/Params.vue","webpack:///./src/components/goods/Params.vue?8576"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","cateList","defaultProps","on","handleCateChange","model","value","callback","$$v","currentCateIds","expression","handleTabClick","activeName","isDisabled","$event","addDialogVisible","manyList","scopedSlots","_u","key","fn","scope","_l","row","item","index","deleteTag","_s","ref","staticClass","handleInputConfirm","nativeOn","type","indexOf","_k","keyCode","target","blur","$set","trim","showInput","showEditDialog","attr_id","deleteAttr","onlyList","titleText","newAttr","slot","addAttr","editDialogVisible","editAttrData","editAttr","staticRenderFns","name","data","expandTrigger","label","attr_name","computed","cateId","length","created","getCateList","methods","getAttributes","$confirm","confirmButtonText","cancelButtonText","message","inputVisible","$nextTick","attr_vals","splice","saveTag","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,gBAAgB,CAACE,MAAM,CAAC,kBAAkB,wBAAwB,CAACF,EAAG,qBAAqB,CAACE,MAAM,CAAC,GAAK,CAAEC,KAAM,WAAY,CAACP,EAAIQ,GAAG,QAAQJ,EAAG,qBAAqB,CAACJ,EAAIQ,GAAG,UAAUJ,EAAG,qBAAqB,CAACJ,EAAIQ,GAAG,WAAW,GAAGJ,EAAG,UAAU,CAACA,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,oBAAoB,KAAO,UAAU,UAAW,EAAM,YAAY,MAAMF,EAAG,SAAS,CAACA,EAAG,OAAO,CAACJ,EAAIQ,GAAG,aAAaJ,EAAG,cAAc,CAACE,MAAM,CAAC,QAAUN,EAAIS,SAAS,MAAQT,EAAIU,cAAcC,GAAG,CAAC,OAASX,EAAIY,kBAAkBC,MAAM,CAACC,MAAOd,EAAkB,eAAEe,SAAS,SAAUC,GAAMhB,EAAIiB,eAAeD,GAAKE,WAAW,qBAAqB,GAAGd,EAAG,UAAU,CAACO,GAAG,CAAC,YAAYX,EAAImB,gBAAgBN,MAAM,CAACC,MAAOd,EAAc,WAAEe,SAAS,SAAUC,GAAMhB,EAAIoB,WAAWJ,GAAKE,WAAW,eAAe,CAACd,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,OAAO,SAAWN,EAAIqB,YAAYV,GAAG,CAAC,MAAQ,SAASW,GAAQtB,EAAIuB,kBAAmB,KAAQ,CAACvB,EAAIQ,GAAG,UAAUJ,EAAG,WAAW,CAACE,MAAM,CAAC,KAAON,EAAIwB,SAAS,OAAS,GAAG,OAAS,KAAK,CAACpB,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,UAAUmB,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAC7B,EAAI8B,GAAID,EAAME,IAAa,WAAE,SAASC,EAAKC,GAAO,OAAO7B,EAAG,SAAS,CAACuB,IAAIM,EAAM3B,MAAM,CAAC,SAAW,IAAIK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAIkC,UAAUL,EAAME,IAAKE,MAAU,CAACjC,EAAIQ,GAAGR,EAAImC,GAAGH,SAAYH,EAAME,IAAgB,aAAE3B,EAAG,WAAW,CAACgC,IAAI,eAAeC,YAAY,gBAAgB/B,MAAM,CAAC,KAAO,SAASK,GAAG,CAAC,KAAO,SAASW,GAAQ,OAAOtB,EAAIsC,mBAAmBT,EAAME,OAAOQ,SAAS,CAAC,MAAQ,SAASjB,GAAQ,OAAIA,EAAOkB,KAAKC,QAAQ,QAAQzC,EAAI0C,GAAGpB,EAAOqB,QAAQ,QAAQ,GAAGrB,EAAOK,IAAI,SAAkB,KAAcL,EAAOsB,OAAOC,SAAShC,MAAM,CAACC,MAAOe,EAAME,IAAc,WAAEhB,SAAS,SAAUC,GAAMhB,EAAI8C,KAAKjB,EAAME,IAAK,aAA8B,kBAARf,EAAkBA,EAAI+B,OAAQ/B,IAAOE,WAAW,0BAA0Bd,EAAG,YAAY,CAACiC,YAAY,iBAAiB/B,MAAM,CAAC,KAAO,SAASK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAIgD,UAAUnB,EAAME,QAAQ,CAAC/B,EAAIQ,GAAG,sBAAsBJ,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,IAAI,KAAO,WAAWF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,eAAeF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,MAAMmB,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACzB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,eAAe,KAAO,QAAQK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAIiD,eAAepB,EAAME,IAAImB,YAAY,CAAClD,EAAIQ,GAAG,QAAQJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,iBAAiB,KAAO,QAAQK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAImD,WAAWtB,EAAME,IAAImB,YAAY,CAAClD,EAAIQ,GAAG,gBAAgB,IAAI,GAAGJ,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,SAAS,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,OAAO,SAAWN,EAAIqB,YAAYV,GAAG,CAAC,MAAQ,SAASW,GAAQtB,EAAIuB,kBAAmB,KAAQ,CAACvB,EAAIQ,GAAG,UAAUJ,EAAG,WAAW,CAACE,MAAM,CAAC,KAAON,EAAIoD,SAAS,OAAS,GAAG,OAAS,KAAK,CAAChD,EAAG,kBAAkB,CAACE,MAAM,CAAC,KAAO,UAAUmB,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAC7B,EAAI8B,GAAID,EAAME,IAAa,WAAE,SAASC,EAAKC,GAAO,OAAO7B,EAAG,SAAS,CAACuB,IAAIM,EAAM3B,MAAM,CAAC,SAAW,IAAIK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAIkC,UAAUL,EAAME,IAAKE,MAAU,CAACjC,EAAIQ,GAAGR,EAAImC,GAAGH,SAAYH,EAAME,IAAgB,aAAE3B,EAAG,WAAW,CAACgC,IAAI,eAAeC,YAAY,gBAAgB/B,MAAM,CAAC,KAAO,SAASK,GAAG,CAAC,KAAO,SAASW,GAAQ,OAAOtB,EAAIsC,mBAAmBT,EAAME,OAAOQ,SAAS,CAAC,MAAQ,SAASjB,GAAQ,OAAIA,EAAOkB,KAAKC,QAAQ,QAAQzC,EAAI0C,GAAGpB,EAAOqB,QAAQ,QAAQ,GAAGrB,EAAOK,IAAI,SAAkB,KAAcL,EAAOsB,OAAOC,SAAShC,MAAM,CAACC,MAAOe,EAAME,IAAc,WAAEhB,SAAS,SAAUC,GAAMhB,EAAI8C,KAAKjB,EAAME,IAAK,aAA8B,kBAARf,EAAkBA,EAAI+B,OAAQ/B,IAAOE,WAAW,0BAA0Bd,EAAG,YAAY,CAACiC,YAAY,iBAAiB/B,MAAM,CAAC,KAAO,SAASK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAIgD,UAAUnB,EAAME,QAAQ,CAAC/B,EAAIQ,GAAG,sBAAsBJ,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,IAAI,KAAO,WAAWF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,eAAeF,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,MAAMmB,YAAYzB,EAAI0B,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAACzB,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,KAAO,eAAe,KAAO,QAAQK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAIiD,eAAepB,EAAME,IAAImB,YAAY,CAAClD,EAAIQ,GAAG,QAAQJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAAS,KAAO,iBAAiB,KAAO,QAAQK,GAAG,CAAC,MAAQ,SAASW,GAAQ,OAAOtB,EAAImD,WAAWtB,EAAME,IAAImB,YAAY,CAAClD,EAAIQ,GAAG,gBAAgB,IAAI,IAAI,IAAI,GAAGJ,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,KAAON,EAAIqD,UAAU,QAAUrD,EAAIuB,iBAAiB,MAAQ,OAAOZ,GAAG,CAAC,iBAAiB,SAASW,GAAQtB,EAAIuB,iBAAiBD,KAAU,CAAClB,EAAG,UAAU,CAACgC,IAAI,aAAa9B,MAAM,CAAC,MAAQN,EAAIsD,QAAQ,cAAc,UAAU,CAAClD,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQN,EAAIqD,UAAY,OAAO,CAACjD,EAAG,WAAW,CAACS,MAAM,CAACC,MAAOd,EAAIsD,QAAiB,UAAEvC,SAAS,SAAUC,GAAMhB,EAAI8C,KAAK9C,EAAIsD,QAAS,YAAatC,IAAME,WAAW,wBAAwB,IAAI,GAAGd,EAAG,OAAO,CAACiC,YAAY,gBAAgB/B,MAAM,CAAC,KAAO,UAAUiD,KAAK,UAAU,CAACnD,EAAG,YAAY,CAACO,GAAG,CAAC,MAAQ,SAASW,GAAQtB,EAAIuB,kBAAmB,KAAS,CAACvB,EAAIQ,GAAG,SAASJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWK,GAAG,CAAC,MAAQX,EAAIwD,UAAU,CAACxD,EAAIQ,GAAG,UAAU,IAAI,GAAGJ,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,KAAON,EAAIqD,UAAU,QAAUrD,EAAIyD,kBAAkB,MAAQ,OAAO9C,GAAG,CAAC,iBAAiB,SAASW,GAAQtB,EAAIyD,kBAAkBnC,KAAU,CAAClB,EAAG,UAAU,CAACgC,IAAI,aAAa9B,MAAM,CAAC,MAAQN,EAAI0D,aAAa,cAAc,UAAU,CAACtD,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQN,EAAIqD,UAAY,OAAO,CAACjD,EAAG,WAAW,CAACS,MAAM,CAACC,MAAOd,EAAI0D,aAAsB,UAAE3C,SAAS,SAAUC,GAAMhB,EAAI8C,KAAK9C,EAAI0D,aAAc,YAAa1C,IAAME,WAAW,6BAA6B,IAAI,GAAGd,EAAG,OAAO,CAACiC,YAAY,gBAAgB/B,MAAM,CAAC,KAAO,UAAUiD,KAAK,UAAU,CAACnD,EAAG,YAAY,CAACO,GAAG,CAAC,MAAQ,SAASW,GAAQtB,EAAIyD,mBAAoB,KAAS,CAACzD,EAAIQ,GAAG,SAASJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAWK,GAAG,CAAC,MAAQX,EAAI2D,WAAW,CAAC3D,EAAIQ,GAAG,UAAU,IAAI,IAAI,IAC78LoD,EAAkB,G,sFCgMtB,GACEC,KAAM,SACNC,KAFF,WAGI,MAAO,CACLrD,SAAU,GACVe,SAAU,GACV4B,SAAU,GACV1C,aAAc,CACZqD,cAAe,QACfC,MAAO,WACPlD,MAAO,UAETG,eAAgB,GAChBG,WAAY,OACZG,kBAAkB,EAClBkC,mBAAmB,EACnBH,QAAS,CACPW,UAAW,IAEbP,aAAc,KAGlBQ,SAAU,CACRC,OADJ,WAEM,OAAmC,IAA/BlE,KAAKgB,eAAemD,OACfnE,KAAKgB,eAAe,GAEtB,MAETI,WAPJ,WAQM,OAAmC,IAA/BpB,KAAKgB,eAAemD,QAK1Bf,UAbJ,WAcM,MAAwB,SAApBpD,KAAKmB,WACA,OAEF,SAGXiD,QA1CF,WA2CIpE,KAAKqE,eAEPC,QAAS,CACP,YADJ,WACA,gLACA,mBADA,gBACA,EADA,EACA,KACA,oBACA,yBAEA,kBALA,8CAQI,cATJ,WASA,mKACA,4BADA,uBAEA,oBACA,cACA,cACA,yBALA,0CAQA,sCARA,gBAQA,EARA,EAQA,KACA,oBACA,0BAEA,4BACA,kDACA,kBACA,mBAEA,sBACA,kBAEA,mBApBA,+CAwBI3D,iBAjCJ,WAkCMX,KAAKuE,iBAEPrD,eApCJ,WAqCMlB,KAAKuE,iBAEP,QAvCJ,WAuCA,gLACA,0DADA,gBACA,EADA,EACA,KACA,eACA,oBACA,0BAEA,wBACA,kBACA,uBARA,8CAWI,eAlDJ,SAkDA,mLACA,2BADA,gBACA,EADA,EACA,KACA,oBACA,0BAEA,sBACA,wBANA,8CASI,SA3DJ,WA2DA,gLACA,sFADA,gBACA,EADA,EACA,KACA,oBACA,0BAEA,wBACA,kBACA,wBAPA,8CAUIrB,WArEJ,SAqEA,cACMlD,KAAKwE,SAAS,WAAY,KAAM,CAC9BC,kBAAmB,KACnBC,iBAAkB,KAClBnC,KAAM,YACd,KAJA,wCAIA,sHACA,2BADA,gBACA,EADA,EACA,KACA,oBACA,0BAEA,wBACA,mBANA,4CAQA,kBACQ,EAAR,MACUA,KAAM,OACNoC,QAAS,cAKf,QA1FJ,SA0FA,4KACA,wBADA,SAEA,4DAFA,mBAEA,EAFA,EAEA,KACA,oBAHA,yCAGA,0BAHA,OAIA,wBAJA,8CAMI,mBAhGJ,SAgGA,8JACA,wBADA,uBAEA,kBACA,gBACA,uBAJA,0BAOA,+BACA,gBACA,kBACA,aAVA,8CAYI5B,UA5GJ,SA4GA,cACMjB,EAAI8C,cAAe,EACnB5E,KAAK6E,WAAU,WAEb,EAAR,2CAGI5C,UAnHJ,SAmHA,KACMH,EAAIgD,UAAUC,OAAO/C,EAAO,GAC5BhC,KAAKgF,QAAQlD,MCnW4U,I,wBCQ3VmD,EAAY,eACd,EACAnF,EACA6D,GACA,EACA,KACA,WACA,MAIa,aAAAsB,E,6CCnBf,W","file":"js/chunk-73470a1d.b161cd14.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"参数列表\")])],1),_c('el-card',[_c('el-alert',{attrs:{\"title\":\"注意：只允许为第三级分类设置参数！\",\"type\":\"warning\",\"closable\":false,\"show-icon\":\"\"}}),_c('el-row',[_c('span',[_vm._v(\"选择商品分类：\")]),_c('el-cascader',{attrs:{\"options\":_vm.cateList,\"props\":_vm.defaultProps},on:{\"change\":_vm.handleCateChange},model:{value:(_vm.currentCateIds),callback:function ($$v) {_vm.currentCateIds=$$v},expression:\"currentCateIds\"}})],1),_c('el-tabs',{on:{\"tab-click\":_vm.handleTabClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"动态参数\",\"name\":\"many\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"disabled\":_vm.isDisabled},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加参数\")]),_c('el-table',{attrs:{\"data\":_vm.manyList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._l((scope.row.attr_vals),function(item,index){return _c('el-tag',{key:index,attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.deleteTag(scope.row, index)}}},[_vm._v(_vm._s(item))])}),(scope.row.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":function($event){return _vm.handleInputConfirm(scope.row)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return $event.target.blur()}},model:{value:(scope.row.inputValue),callback:function ($$v) {_vm.$set(scope.row, \"inputValue\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"scope.row.inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.showInput(scope.row)}}},[_vm._v(\"+ New Tag\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"#\",\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"参数名称\",\"prop\":\"attr_name\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.attr_id)}}},[_vm._v(\"修改\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteAttr(scope.row.attr_id)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"静态属性\",\"name\":\"only\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"disabled\":_vm.isDisabled},on:{\"click\":function($event){_vm.addDialogVisible = true}}},[_vm._v(\"添加属性\")]),_c('el-table',{attrs:{\"data\":_vm.onlyList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._l((scope.row.attr_vals),function(item,index){return _c('el-tag',{key:index,attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.deleteTag(scope.row, index)}}},[_vm._v(_vm._s(item))])}),(scope.row.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":function($event){return _vm.handleInputConfirm(scope.row)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return $event.target.blur()}},model:{value:(scope.row.inputValue),callback:function ($$v) {_vm.$set(scope.row, \"inputValue\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"scope.row.inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.showInput(scope.row)}}},[_vm._v(\"+ New Tag\")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"#\",\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"属性名称\",\"prop\":\"attr_name\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.attr_id)}}},[_vm._v(\"修改\")]),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteAttr(scope.row.attr_id)}}},[_vm._v(\"删除\")])]}}])})],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":'添加' + _vm.titleText,\"visible\":_vm.addDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event}}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.newAttr,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.titleText + '名称'}},[_c('el-input',{model:{value:(_vm.newAttr.attr_name),callback:function ($$v) {_vm.$set(_vm.newAttr, \"attr_name\", $$v)},expression:\"newAttr.attr_name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addAttr}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":'修改' + _vm.titleText,\"visible\":_vm.editDialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event}}},[_c('el-form',{ref:\"addFormRef\",attrs:{\"model\":_vm.editAttrData,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.titleText + '名称'}},[_c('el-input',{model:{value:(_vm.editAttrData.attr_name),callback:function ($$v) {_vm.$set(_vm.editAttrData, \"attr_name\", $$v)},expression:\"editAttrData.attr_name\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editAttr}},[_vm._v(\"修 改\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>参数列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-alert\r\n        title=\"注意：只允许为第三级分类设置参数！\"\r\n        type=\"warning\"\r\n        :closable=\"false\"\r\n        show-icon\r\n      >\r\n      </el-alert>\r\n      <el-row>\r\n        <span>选择商品分类：</span>\r\n        <!-- 选择器 -->\r\n        <el-cascader\r\n          v-model=\"currentCateIds\"\r\n          :options=\"cateList\"\r\n          :props=\"defaultProps\"\r\n          @change=\"handleCateChange\"\r\n        ></el-cascader>\r\n      </el-row>\r\n      <!-- Tab 标签页 -->\r\n      <el-tabs v-model=\"activeName\" @tab-click=\"handleTabClick\">\r\n        <!-- 动态参数 -->\r\n        <el-tab-pane label=\"动态参数\" name=\"many\">\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"mini\"\r\n            :disabled=\"isDisabled\"\r\n            @click=\"addDialogVisible = true\"\r\n            >添加参数</el-button\r\n          >\r\n          <el-table :data=\"manyList\" border stripe>\r\n            <el-table-column type=\"expand\">\r\n              <template v-slot=\"scope\">\r\n                <el-tag\r\n                  v-for=\"(item, index) in scope.row.attr_vals\"\r\n                  :key=\"index\"\r\n                  closable\r\n                  @close=\"deleteTag(scope.row, index)\"\r\n                  >{{ item }}</el-tag\r\n                >\r\n                <el-input\r\n                  class=\"input-new-tag\"\r\n                  v-if=\"scope.row.inputVisible\"\r\n                  v-model.trim=\"scope.row.inputValue\"\r\n                  ref=\"saveTagInput\"\r\n                  size=\"small\"\r\n                  @keyup.enter.native=\"$event.target.blur()\"\r\n                  @blur=\"handleInputConfirm(scope.row)\"\r\n                >\r\n                </el-input>\r\n                <el-button\r\n                  v-else\r\n                  class=\"button-new-tag\"\r\n                  size=\"small\"\r\n                  @click=\"showInput(scope.row)\"\r\n                  >+ New Tag</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"#\" type=\"index\"></el-table-column>\r\n            <el-table-column\r\n              label=\"参数名称\"\r\n              prop=\"attr_name\"\r\n            ></el-table-column>\r\n            <el-table-column label=\"操作\">\r\n              <template v-slot=\"scope\">\r\n                <el-button\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-edit\"\r\n                  size=\"mini\"\r\n                  @click=\"showEditDialog(scope.row.attr_id)\"\r\n                  >修改</el-button\r\n                >\r\n                <el-button\r\n                  type=\"danger\"\r\n                  icon=\"el-icon-delete\"\r\n                  size=\"mini\"\r\n                  @click=\"deleteAttr(scope.row.attr_id)\"\r\n                  >删除</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-tab-pane>\r\n        <!-- 静态属性 -->\r\n        <el-tab-pane label=\"静态属性\" name=\"only\">\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"mini\"\r\n            :disabled=\"isDisabled\"\r\n            @click=\"addDialogVisible = true\"\r\n            >添加属性</el-button\r\n          >\r\n          <el-table :data=\"onlyList\" border stripe>\r\n            <el-table-column type=\"expand\">\r\n              <template v-slot=\"scope\">\r\n                <el-tag\r\n                  v-for=\"(item, index) in scope.row.attr_vals\"\r\n                  :key=\"index\"\r\n                  closable\r\n                  @close=\"deleteTag(scope.row, index)\"\r\n                  >{{ item }}</el-tag\r\n                >\r\n                <el-input\r\n                  class=\"input-new-tag\"\r\n                  v-if=\"scope.row.inputVisible\"\r\n                  v-model.trim=\"scope.row.inputValue\"\r\n                  ref=\"saveTagInput\"\r\n                  size=\"small\"\r\n                  @keyup.enter.native=\"$event.target.blur()\"\r\n                  @blur=\"handleInputConfirm(scope.row)\"\r\n                >\r\n                </el-input>\r\n                <el-button\r\n                  v-else\r\n                  class=\"button-new-tag\"\r\n                  size=\"small\"\r\n                  @click=\"showInput(scope.row)\"\r\n                  >+ New Tag</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"#\" type=\"index\"></el-table-column>\r\n            <el-table-column\r\n              label=\"属性名称\"\r\n              prop=\"attr_name\"\r\n            ></el-table-column>\r\n            <el-table-column label=\"操作\">\r\n              <template v-slot=\"scope\">\r\n                <el-button\r\n                  type=\"primary\"\r\n                  icon=\"el-icon-edit\"\r\n                  size=\"mini\"\r\n                  @click=\"showEditDialog(scope.row.attr_id)\"\r\n                  >修改</el-button\r\n                >\r\n                <el-button\r\n                  type=\"danger\"\r\n                  icon=\"el-icon-delete\"\r\n                  size=\"mini\"\r\n                  @click=\"deleteAttr(scope.row.attr_id)\"\r\n                  >删除</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </el-card>\r\n    <!-- 添加对话框 -->\r\n    <el-dialog\r\n      :title=\"'添加' + titleText\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      width=\"30%\"\r\n    >\r\n      <el-form :model=\"newAttr\" label-width=\"100px\" ref=\"addFormRef\">\r\n        <el-form-item :label=\"titleText + '名称'\">\r\n          <el-input v-model=\"newAttr.attr_name\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addAttr\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n    <!-- 编辑对话框 -->\r\n    <el-dialog\r\n      :title=\"'修改' + titleText\"\r\n      :visible.sync=\"editDialogVisible\"\r\n      width=\"30%\"\r\n    >\r\n      <el-form :model=\"editAttrData\" label-width=\"100px\" ref=\"addFormRef\">\r\n        <el-form-item :label=\"titleText + '名称'\">\r\n          <el-input v-model=\"editAttrData.attr_name\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editAttr\">修 改</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCategories, getAttributes, addAttr, searchAttrById, editAttr, deleteAttr } from 'network/goods.js'\r\n\r\nexport default {\r\n  name: 'Params',\r\n  data() {\r\n    return {\r\n      cateList: [],\r\n      manyList: [],\r\n      onlyList: [],\r\n      defaultProps: {\r\n        expandTrigger: 'hover',\r\n        label: 'cat_name',\r\n        value: 'cat_id'\r\n      },\r\n      currentCateIds: [],\r\n      activeName: 'many',\r\n      addDialogVisible: false,\r\n      editDialogVisible: false,\r\n      newAttr: {\r\n        attr_name: ''\r\n      },\r\n      editAttrData: {}\r\n    }\r\n  },\r\n  computed: {\r\n    cateId() {\r\n      if (this.currentCateIds.length === 3) {\r\n        return this.currentCateIds[2]\r\n      }\r\n      return null\r\n    },\r\n    isDisabled() {\r\n      if (this.currentCateIds.length !== 3) {\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    titleText() {\r\n      if (this.activeName === 'many') {\r\n        return '动态参数'\r\n      }\r\n      return '静态属性'\r\n    }\r\n  },\r\n  created() {\r\n    this.getCateList()\r\n  },\r\n  methods: {\r\n    async getCateList() {\r\n      const { data: res } = await getCategories({})\r\n      if (res.meta.status !== 200) {\r\n        this.$msg.error(res.meta.msg)\r\n      } else {\r\n        this.cateList = res.data\r\n      }\r\n    },\r\n    async getAttributes() {\r\n      if (this.currentCateIds.length !== 3) {\r\n        this.currentCateIds = []\r\n        this.manyList = []\r\n        this.onlyList = []\r\n        this.$msg.error('请选择三级分类！')\r\n        return\r\n      }\r\n      const { data: res } = await getAttributes(this.cateId, this.activeName)\r\n      if (res.meta.status !== 200) {\r\n        this.$msg.error(res.meta.msg)\r\n      } else {\r\n        res.data.forEach(item => {\r\n          item.attr_vals = item.attr_vals ? item.attr_vals.split(' ') : []\r\n          item.inputVisible = false\r\n          item.inputValue = ''\r\n        })\r\n        if (this.activeName === 'many') {\r\n          this.manyList = res.data\r\n        } else {\r\n          this.onlyList = res.data\r\n        }\r\n      }\r\n    },\r\n    handleCateChange() {\r\n      this.getAttributes()\r\n    },\r\n    handleTabClick() {\r\n      this.getAttributes()\r\n    },\r\n    async addAttr() {\r\n      const { data: res } = await addAttr(this.cateId, this.newAttr.attr_name, this.activeName)\r\n      console.log(res)\r\n      if (res.meta.status !== 201) {\r\n        this.$msg.error(res.meta.msg)\r\n      } else {\r\n        this.$msg.success('添加成功！')\r\n        this.getAttributes()\r\n        this.addDialogVisible = false\r\n      }\r\n    },\r\n    async showEditDialog(attrId) {\r\n      const { data: res } = await searchAttrById(this.cateId, attrId)\r\n      if (res.meta.status !== 200) {\r\n        this.$msg.error(res.meta.msg)\r\n      } else {\r\n        this.editAttrData = res.data\r\n        this.editDialogVisible = true\r\n      }\r\n    },\r\n    async editAttr() {\r\n      const { data: res } = await editAttr(this.cateId, this.editAttrData.attr_id, this.editAttrData.attr_name, this.activeName)\r\n      if (res.meta.status !== 200) {\r\n        this.$msg.error(res.meta.msg)\r\n      } else {\r\n        this.$msg.success('修改成功！')\r\n        this.getAttributes()\r\n        this.editDialogVisible = false\r\n      }\r\n    },\r\n    deleteAttr(attrId) {\r\n      this.$confirm('是否删除此参数？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        const { data: res } = await deleteAttr(this.cateId, attrId)\r\n        if (res.meta.status !== 200) {\r\n          this.$msg.error(res.meta.msg)\r\n        } else {\r\n          this.$msg.success('删除成功!')\r\n          this.getAttributes()\r\n        }\r\n      }).catch(() => {\r\n        this.$msg({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        })\r\n      })\r\n    },\r\n    // 添加参数 tag 请求\r\n    async saveTag(row) {\r\n      const vals = row.attr_vals.join(' ')\r\n      const { data: res } = await editAttr(this.cateId, row.attr_id, row.attr_name, row.attr_sel, vals)\r\n      if (res.meta.status !== 200) return this.$msg.error(res.meta.msg)\r\n      this.$msg.success('修改成功！')\r\n    },\r\n    async handleInputConfirm(row) {\r\n      if (row.inputValue.length === 0) {\r\n        row.inputVisible = false\r\n        row.inputValue = ''\r\n        this.$msg.error('error.')\r\n        return\r\n      }\r\n      row.attr_vals.push(row.inputValue)\r\n      row.inputValue = ''\r\n      row.inputVisible = false\r\n      this.saveTag(row)\r\n    },\r\n    showInput(row) {\r\n      row.inputVisible = true\r\n      this.$nextTick(() => {\r\n        // 自动获取焦点\r\n        this.$refs.saveTagInput.$refs.input.focus()\r\n      })\r\n    },\r\n    deleteTag(row, index) {\r\n      row.attr_vals.splice(index, 1)\r\n      this.saveTag(row)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-alert {\r\n  margin-bottom: 15px;\r\n}\r\n.el-table {\r\n  margin-top: 15px;\r\n}\r\n.el-tag {\r\n  margin: 5px;\r\n}\r\n.button-new-tag {\r\n  margin: 5px;\r\n  height: 32px;\r\n  line-height: 30px;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n}\r\n.input-new-tag {\r\n  width: 90px;\r\n  margin: 5px;\r\n  vertical-align: bottom;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Params.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Params.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Params.vue?vue&type=template&id=0183dd51&scoped=true&\"\nimport script from \"./Params.vue?vue&type=script&lang=js&\"\nexport * from \"./Params.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Params.vue?vue&type=style&index=0&id=0183dd51&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0183dd51\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/index.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Params.vue?vue&type=style&index=0&id=0183dd51&lang=less&scoped=true&\""],"sourceRoot":""}